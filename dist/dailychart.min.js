"use strict";var _createClass=function(){function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var SVG_NS="http://www.w3.org/2000/svg",Dailychart=function(){function i(t,e){_classCallCheck(this,i),this.options=i.extend({},this.defaultOptions,e),this.element=t,this.width=this.options.width||t.offsetWidth,this.height=this.options.height||t.offsetHeight,this.values=t.getAttribute("data-dailychart-values").split(",").map(Number),this.length=+t.getAttribute("data-dailychart-length"),this.previous=+t.getAttribute("data-dailychart-close"),this._normalize(),this._translate(),this._draw()}return _createClass(i,[{key:"_normalize",value:function(){var e=this,t=Math.max.apply(null,this.values.concat([this.previous])),i=Math.min.apply(null,this.values.concat([this.previous])),s=(this.height-2*this.options.lineWidth)/(t-i);this.values=this.values.map(function(t){return(t-i)*s+e.options.lineWidth}),this.previous=(this.previous-i)*s+this.options.lineWidth}},{key:"_translate",value:function(){var e=this;this.values=this.values.map(function(t){return e.height-t}),this.previous=this.height-this.previous}},{key:"_id",value:function(){return Math.random().toString(36).substr(2,9)}},{key:"_path",value:function(){for(var t=this.width/this.length,e=0,i=[];e<this.values.length;e++)i.push(0===e?"M":"L"),i.push(e*t),i.push(this.values[e]);return i.join(" ")}},{key:"_draw",value:function(){var t=this._id(),e=this._path(),i=this._svgElement(),s=this._lineElement(this.previous),r=this._pathElement(e,this.options.colorPositive,"dailychart-"+t+"-positive"),n=this._clipElement("dailychart-"+t+"-positive"),h=this._rectElement(0,0,this.width,this.previous),a=this._pathElement(e,this.options.colorNegative,"dailychart-"+t+"-negative"),l=this._clipElement("dailychart-"+t+"-negative"),o=this._rectElement(0,this.previous,this.width,this.height-this.previous);n.appendChild(h),l.appendChild(o),i.appendChild(n),i.appendChild(l),i.appendChild(s),i.appendChild(r),i.appendChild(a),this.element.appendChild(i)}},{key:"_svgElement",value:function(){var t=document.createElementNS(SVG_NS,"svg");return t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns",SVG_NS),t.setAttribute("width",this.width),t.setAttribute("height",this.height),t}},{key:"_lineElement",value:function(t){var e=document.createElementNS(SVG_NS,"line");return e.setAttribute("x1",0),e.setAttribute("y1",t),e.setAttribute("x2",this.width),e.setAttribute("y2",t),e.setAttribute("stroke",this.options.closeColor),e.setAttribute("stroke-width",this.options.closeWidth),e.style.shapeRendering="crispEdges",e}},{key:"_pathElement",value:function(t,e,i){var s=document.createElementNS(SVG_NS,"path");return s.setAttribute("d",t),s.setAttribute("fill","none"),s.setAttribute("stroke-width",this.options.lineWidth),s.setAttribute("stroke-linejoin","bevel"),s.setAttribute("stroke",e),s.setAttribute("clip-path","url(#"+i+")"),s}},{key:"_rectElement",value:function(t,e,i,s){var r=document.createElementNS(SVG_NS,"rect");return r.setAttribute("x",t),r.setAttribute("y",e),r.setAttribute("width",i),r.setAttribute("height",s),r}},{key:"_clipElement",value:function(t){var e=document.createElementNS(SVG_NS,"clipPath");return e.setAttribute("id",t),e}}],[{key:"extend",value:function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];var r=i,n=Array.isArray(r),h=0;for(r=n?r:r[Symbol.iterator]();;){var a;if(n){if(h>=r.length)break;a=r[h++]}else{if((h=r.next()).done)break;a=h.value}var l=a;for(var o in l){var u=l[o];t[o]=u}}return t}}]),i}();Dailychart.prototype.defaultOptions={width:void 0,height:void 0,lineWidth:1,colorPositive:"#33AE45",colorNegative:"#EB5757",closeWidth:1,closeColor:"#e0e0e0"},Dailychart.version="1.0.0";