"use strict";var _createClass=function(){function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var SVG_NS="http://www.w3.org/2000/svg",Dailychart=function(){function i(t,e){_classCallCheck(this,i),this.options=i.extend({},this.defaultOptions,e),this.element=t,this.width=this.options.width||t.offsetWidth,this.height=this.options.height||t.offsetHeight,this.values=t.getAttribute("data-dailychart-values").split(",").map(Number),this.length=+t.getAttribute("data-dailychart-length"),this.previous=+t.getAttribute("data-dailychart-close"),this._normalize(),this._translate(),this._draw()}return _createClass(i,[{key:"_normalize",value:function(){var e=this,t=Math.max.apply(null,this.values.concat([this.previous])),i=Math.min.apply(null,this.values.concat([this.previous])),s=(this.height-2*this.options.lineWidth)/(t-i);this.values=this.values.map(function(t){return(t-i)*s+e.options.lineWidth}),this.previous=(this.previous-i)*s+this.options.lineWidth}},{key:"_translate",value:function(){var e=this;this.values=this.values.map(function(t){return e.height-t}),this.previous=this.height-this.previous}},{key:"_id",value:function(){return Math.random().toString(36).substr(2,9)}},{key:"_path",value:function(){for(var t=this.width/this.length,e=0,i=[];e<this.values.length;e++)i.push(0===e?"M":"L"),i.push(e*t),i.push(this.values[e]);return i.join(" ")}},{key:"_close",value:function(t,e){return"positive"===e&&(t+=" V "+this.height+" H 0 Z"),"negative"===e&&(t+=" V 0 H 0 Z"),t}},{key:"_draw",value:function(){var t=this.options,e=t.lineWidth,i=t.colorPositive,s=t.colorNegative,n=t.fillPositive,h=t.fillNegative,r=this._id(),a="dailychart-"+r+"-positive",l="dailychart-"+r+"-negative",o=this._path(),u=this._close(o,"positive"),p=this._close(o,"negative"),c=this._svgElement(),v=this._lineElement(this.previous),d=this._pathElement(o,e,i,"",a),f=this._pathElement(u,0,"",n,a),m=this._clipElement(a),g=this._rectElement(0,0,this.width,this.previous),_=this._pathElement(o,e,s,"",l),y=this._pathElement(p,0,"",h,l),b=this._clipElement(l),A=this._rectElement(0,this.previous,this.width,this.height-this.previous);m.appendChild(g),b.appendChild(A),c.appendChild(m),c.appendChild(b),c.appendChild(v),c.appendChild(f),c.appendChild(y),c.appendChild(d),c.appendChild(_),this.element.appendChild(c)}},{key:"_svgElement",value:function(){var t=document.createElementNS(SVG_NS,"svg");return t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns",SVG_NS),t.setAttribute("width",this.width),t.setAttribute("height",this.height),t}},{key:"_lineElement",value:function(t){var e=document.createElementNS(SVG_NS,"line");return e.setAttribute("x1",0),e.setAttribute("y1",t),e.setAttribute("x2",this.width),e.setAttribute("y2",t),e.setAttribute("stroke",this.options.closeColor),e.setAttribute("stroke-width",this.options.closeWidth),e.style.shapeRendering="crispEdges",e}},{key:"_pathElement",value:function(t,e,i,s,n){var h=document.createElementNS(SVG_NS,"path");return h.setAttribute("d",t),h.setAttribute("fill",""===s?"none":s),h.setAttribute("stroke-width",e),h.setAttribute("stroke-linejoin","bevel"),h.setAttribute("stroke",""===i?"none":i),h.setAttribute("clip-path","url(#"+n+")"),h}},{key:"_rectElement",value:function(t,e,i,s){var n=document.createElementNS(SVG_NS,"rect");return n.setAttribute("x",t),n.setAttribute("y",e),n.setAttribute("width",i),n.setAttribute("height",s),n}},{key:"_clipElement",value:function(t){var e=document.createElementNS(SVG_NS,"clipPath");return e.setAttribute("id",t),e}}],[{key:"extend",value:function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];var n=i,h=Array.isArray(n),r=0;for(n=h?n:n[Symbol.iterator]();;){var a;if(h){if(r>=n.length)break;a=n[r++]}else{if((r=n.next()).done)break;a=r.value}var l=a;for(var o in l){var u=l[o];t[o]=u}}return t}}]),i}();Dailychart.prototype.defaultOptions={width:void 0,height:void 0,lineWidth:1,colorPositive:"#33AE45",colorNegative:"#EB5757",fillPositive:"",fillNegative:"",closeWidth:1,closeColor:"#e0e0e0"},Dailychart.version="1.1.0";